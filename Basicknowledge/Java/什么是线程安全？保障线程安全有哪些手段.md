**什么是线程安全？保障线程安全有哪些手段**

线程安全就是当多个线程访问一个对象时，如果不用考虑这些线程在运行时环境下的调度和交替执行，也不需要进行额外的同步，或者在调用方进行任何其他的协调操作，调用这个对象的行为都可以获得正确的结果，那这个对象是线程安全的。保证线程安全可从多线程三特性出发：

1. 原子性（Atomicity）：单个或多个操作是要么全部执行，要么都不执行

- Lock：保证同时只有一个线程能拿到锁，并执行申请锁和释放锁的代码
- synchronized：对线程加独占锁，被它修饰的类/方法/变量只允许一个线程访问

1. 可见性（Visibility）：当一个线程修改了共享变量的值，其他线程能够立即得知这个修改

- volatile：保证新值能立即同步到主内存，且每次使用前立即从主内存刷新；
- synchronized：在释放锁之前会将工作内存新值更新到主存中

1. 有序性（Ordering）：程序代码按照指令顺序执行

- volatile： 本身就包含了禁止指令重排序的语义
- synchronized：保证一个变量在同一个时刻只允许一条线程对其进行lock操作，使得持有同一个锁的两个同步块只能串行地进入